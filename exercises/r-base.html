<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lino Galiana">

<title>Introduction aux m√©thodes quantitatives avec  - D√©couverte des objets de base de </title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
<meta name="twitter:title" content="Introduction aux m√©thodes quantitatives avec  - D√©couverte des objets de base de ">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://rgeo.linogaliana.fr/cards/version-light/baby.png">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Introduction aux m√©thodes quantitatives avec <i class="fa-brands fa-r-project" aria-label="r-project"></i></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../exercises/r-base.html" rel="" target="" aria-current="page">
 <span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../exercises/r-wrangling.html" rel="" target="">
 <span class="menu-text">Manipulation</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/linogaliana/r-geographie" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#familiarisation-avec-rstudio" id="toc-familiarisation-avec-rstudio" class="nav-link active" data-scroll-target="#familiarisation-avec-rstudio"><span class="header-section-number">1</span> Familiarisation avec <code>RStudio</code></a></li>
  <li><a href="#les-objets-uni-dimensionnels" id="toc-les-objets-uni-dimensionnels" class="nav-link" data-scroll-target="#les-objets-uni-dimensionnels"><span class="header-section-number">2</span> Les objets uni-dimensionnels</a>
  <ul class="collapse">
  <li><a href="#numeric" id="toc-numeric" class="nav-link" data-scroll-target="#numeric"><span class="header-section-number">2.1</span> Les vecteurs num√©riques (<em>numeric</em>)</a>
  <ul class="collapse">
  <li><a href="#les-deux-types-de-vecteurs-num√©riques" id="toc-les-deux-types-de-vecteurs-num√©riques" class="nav-link" data-scroll-target="#les-deux-types-de-vecteurs-num√©riques"><span class="header-section-number">2.1.1</span> Les deux types de vecteurs num√©riques</a></li>
  <li><a href="#op√©rations-arithm√©tiques-de-base" id="toc-op√©rations-arithm√©tiques-de-base" class="nav-link" data-scroll-target="#op√©rations-arithm√©tiques-de-base"><span class="header-section-number">2.1.2</span> Op√©rations arithm√©tiques de base</a></li>
  <li><a href="#vectorisation" id="toc-vectorisation" class="nav-link" data-scroll-target="#vectorisation"><span class="header-section-number">2.1.3</span> Vectorisation</a></li>
  </ul></li>
  <li><a href="#characters" id="toc-characters" class="nav-link" data-scroll-target="#characters"><span class="header-section-number">2.2</span> Les cha√Ænes de caract√®res (<em>characters</em>)</a>
  <ul class="collapse">
  <li><a href="#cr√©er-un-string" id="toc-cr√©er-un-string" class="nav-link" data-scroll-target="#cr√©er-un-string"><span class="header-section-number">2.2.1</span> Cr√©er un <em>string</em></a></li>
  <li><a href="#quelques-fonctions-utiles" id="toc-quelques-fonctions-utiles" class="nav-link" data-scroll-target="#quelques-fonctions-utiles"><span class="header-section-number">2.2.2</span> Quelques fonctions utiles</a></li>
  </ul></li>
  <li><a href="#logicals" id="toc-logicals" class="nav-link" data-scroll-target="#logicals"><span class="header-section-number">2.3</span> Vecteurs logiques (<em>logicals</em>)</a></li>
  <li><a href="#factors" id="toc-factors" class="nav-link" data-scroll-target="#factors"><span class="header-section-number">2.4</span> Les facteurs (<em>factors</em>)</a></li>
  </ul></li>
  <li><a href="#cr√©er-des-variables" id="toc-cr√©er-des-variables" class="nav-link" data-scroll-target="#cr√©er-des-variables"><span class="header-section-number">3</span> Cr√©er des variables</a></li>
  <li><a href="#indexation" id="toc-indexation" class="nav-link" data-scroll-target="#indexation"><span class="header-section-number">4</span> Indexation</a></li>
  <li><a href="#les-valeurs-manquantes" id="toc-les-valeurs-manquantes" class="nav-link" data-scroll-target="#les-valeurs-manquantes"><span class="header-section-number">5</span> Les valeurs manquantes</a></li>
  <li><a href="#exercices-sur-les-objets-uni-dimensionnel" id="toc-exercices-sur-les-objets-uni-dimensionnel" class="nav-link" data-scroll-target="#exercices-sur-les-objets-uni-dimensionnel"><span class="header-section-number">6</span> Exercices sur les objets uni-dimensionnel</a></li>
  <li><a href="#les-structures-plus-complexes" id="toc-les-structures-plus-complexes" class="nav-link" data-scroll-target="#les-structures-plus-complexes"><span class="header-section-number">7</span> Les structures plus complexes</a>
  <ul class="collapse">
  <li><a href="#les-matrices" id="toc-les-matrices" class="nav-link" data-scroll-target="#les-matrices"><span class="header-section-number">7.1</span> Les matrices</a></li>
  <li><a href="#les-listes" id="toc-les-listes" class="nav-link" data-scroll-target="#les-listes"><span class="header-section-number">7.2</span> Les listes</a></li>
  <li><a href="#les-dataframes" id="toc-les-dataframes" class="nav-link" data-scroll-target="#les-dataframes"><span class="header-section-number">7.3</span> Les <em>dataframes</em></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">D√©couverte des objets de base de <i class="fa-brands fa-r-project" aria-label="r-project"></i></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lino Galiana </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<div class="badge">
<p><a href="https://datalab.sspcloud.fr/launcher/ide/rstudio?autoLaunch=true&amp;init.personalInit=¬´https%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fr-geographie%2Fmain%2Fsspcloud%2Finit.sh¬ª&amp;networking.user.enabled=true&amp;onyxia.friendlyName=¬´rstudio-cours-ENS¬ª" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Tester%20via%20SSP%20cloud%20-%20SSPCloud?logo=R&amp;labelColor=black&amp;color=%231965b8" alt="Onyxia"></a><br></p>
</div>
<details>
<summary>
D√©rouler les <em>slides</em> ci-dessous ou <a href="../slides/introduction.html">cliquer ici</a> pour afficher les slides en plein √©cran.
</summary>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><iframe class="sourceCode yaml code-with-copy" src="/slides/introduction.html"></iframe></div>
</details>
<p>Dans ce premier TP, nous allons rentrer tranquillement dans notre parcours de d√©couverte de <i class="fa-brands fa-r-project" aria-label="r-project"></i>.</p>
<p>Cela se fera par les √©tapes suivantes:</p>
<ol type="1">
<li>Familiarisation avec <code>RStudio</code>, le logiciel qui nous permettra d‚Äôutiliser le langage <i class="fa-brands fa-r-project" aria-label="r-project"></i> ;</li>
<li>D√©couverte des objets de base de <i class="fa-brands fa-r-project" aria-label="r-project"></i>: les vecteurs de <strong>nombres</strong>, de <strong>cha√Ænes de caract√®res</strong> et de conditions logiques, les <strong>listes</strong> et les <em><strong>dataframes</strong></em> ;</li>
<li>D√©couverte de l‚Äô<strong>assignation</strong> des objets √† des <strong>variables</strong> pour r√©aliser des op√©rations avec ces derni√®res.</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note sur les annotations
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Certains exemples de code pr√©sentent des annotations sur le c√¥t√©, passez votre souris dessus pour les afficher, comme ci-dessous</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-1"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="1">1</button><span id="annotated-cell-1-1" class="code-annotation-target"><a href="#annotated-cell-1-1" aria-hidden="true" tabindex="-1"></a><span class="st">"une annotation explicative m'accompagne √† droite"</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-1" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-annotation="1" data-code-cell="annotated-cell-1">Je m‚Äôaffiche quand on passe la souris sur moi üê≠ !</span>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<section id="familiarisation-avec-rstudio" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Familiarisation avec <code>RStudio</code></h1>
<p>Habituellement, pour pouvoir faire du <i class="fa-brands fa-r-project" aria-label="r-project"></i>, on utilise le logiciel <code>RStudio</code><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> qui offre un environnement un peu moins rudimentaire que l‚Äôinterface graphique par d√©faut fournie lors de l‚Äôinstallation de <i class="fa-brands fa-r-project" aria-label="r-project"></i>.</p>
<p>Pour lancer un service <code>RStudio</code> sur des serveurs pr√©configur√©s, nous allons utiliser une infrastructure nomm√©e le <a href="https://datalab.sspcloud.fr/"><code>SSPCloud</code></a> qui est d√©velopp√©e par l‚Äô√©quipe innovation de l‚ÄôInsee pour des projets d‚Äôenseignement ou de <em>data science</em>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://git.lab.sspcloud.fr/diit/presentation/energy-data-hack-2022/20220523-day_1-onyxia_onboarding/-/raw/main/slideshow/macbook_onyxia.png" class="img-fluid figure-img" style="width:50.0%"></p>
</figure>
</div>
<p><br> Apr√®s avoir cr√©√© un compte sur <a href="https://datalab.sspcloud.fr/">datalab.sspcloud.fr/</a>, cliquez sur ce bouton :</p>
<div class="badge">
<p><a href="https://datalab.sspcloud.fr/launcher/ide/rstudio?autoLaunch=true&amp;init.personalInit=¬´https%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fr-geographie%2Fmain%2Fsspcloud%2Finit.sh¬ª&amp;networking.user.enabled=true&amp;onyxia.friendlyName=¬´rstudio-cours-ENS¬ª" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Tester%20via%20SSP%20cloud%20-%20SSPCloud?logo=R&amp;labelColor=black&amp;color=%231965b8" alt="Onyxia"></a><br></p>
</div>
<p>Apr√®s quelques instants de lancement du service sur les serveurs de l‚ÄôInsee, vous pourrez acc√©der √† votre <code>RStudio</code> pr√™t √† l‚Äôemploi (d√©monstration en <em>live</em> ou <a href="../slides/introduction.html#/prise-en-main-du-ssp-cloud">aide m√©moire</a>)</p>
<div class="callout callout-style-default callout-tip callout-titled" data-collapsable="true">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 1: se familiariser avec <code>RStudio</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ce premier exercice vise, apr√®s avoir observ√© la structure des fen√™tres de <code>RStudio</code>, √† prendre en main l‚Äôinterface:</p>
<ol type="1">
<li>Observer la structure de votre dossier de travail en bas √† droite de <code>RStudio</code> ;</li>
<li>Cr√©er un script √† partir du menu <code>File/New File/R script</code> et l‚Äôenregistrer sous le nom <code>script1.R</code> ;</li>
<li>Observer la mise √† jour de votre dossier en bas √† droite ;</li>
<li>Faire une recherche dans la partie Help de RStudio pour la fonction <code>list.files</code> ;</li>
<li>Ecrire dans <code>script1.R</code> le code qui permet de faire la liste des fichiers de votre dossier de travail ;</li>
<li>Utiliser le raccourci <code>RStudio</code> <kbd>CTRL</kbd> + <kbd>ENTREE</kbd> pour ex√©cuter ce code dans la console.</li>
</ol>
</div>
</div>
</section>
<section id="les-objets-uni-dimensionnels" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Les objets uni-dimensionnels</h1>
<p>Nous allons commencer par les objets en une dimension, c‚Äôest-√†-dire les listes de valeurs de m√™me type. Par exemple, <code>["ENS Ulm", "ENS Lyon", "ENS Paris-Saclay"]</code> ou <code>[4 8 15 16 23 42]</code>.</p>
<p>Ces listes de valeurs en une dimension peuvent √™tre repr√©sent√©es par des <strong>vecteurs</strong>. Les quatre types les plus pratiques en <i class="fa-brands fa-r-project" aria-label="r-project"></i> sont :</p>
<ul>
<li>Les <a href="#numeric">vecteurs num√©riques</a> ;</li>
<li>Les <a href="#characters">chaines de caract√®res</a> ;</li>
<li>Les <a href="#logical">vecteurs logiques</a> ;</li>
<li>Les <a href="#factors">facteurs</a>.</li>
</ul>
<p>Nous irons ensuite √† des structures de donn√©es plus complexes mais qui sont en fait celles que nous manipulons plus couramment: les <a href="#lists">listes</a> et les <a href="#dataframes"><em>dataframes</em></a>.</p>
<section id="numeric" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="numeric"><span class="header-section-number">2.1</span> Les vecteurs num√©riques (<em>numeric</em>)</h2>
<section id="les-deux-types-de-vecteurs-num√©riques" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="les-deux-types-de-vecteurs-num√©riques"><span class="header-section-number">2.1.1</span> Les deux types de vecteurs num√©riques</h3>
<p><i class="fa-brands fa-r-project" aria-label="r-project"></i> propose diff√©rents types d‚Äôobjets num√©riques. Pour l‚Äôanalyse de donn√©es, nous allons principalement nous int√©resser principalement √† deux types :</p>
<ul>
<li>les entiers (type <code>int</code> pour <em>integer</em>)</li>
<li>les nombres r√©els (type <code>double</code> pour nombres √† virgule flottante)</li>
</ul>
<p>En pratique, les premiers sont un cas sp√©cial des seconds. Contrairement √† d‚Äôautres langages, <i class="fa-brands fa-r-project" aria-label="r-project"></i> ne tente pas de contraindre de mani√®re automatique les nombres sans virgules √† √™tre des entiers (<em>integers</em>). C‚Äôest pratique mais sur de gros volumes de donn√©es √ßa peut poser probl√®me car les <em>double</em> sont plus lourds que les <em>int</em>.</p>
<p>En g√©n√©ral, on utilise la fonction <code>class</code> pour afficher le type d‚Äôun objet <i class="fa-brands fa-r-project" aria-label="r-project"></i> et si on veut √™tre plus pr√©cis on peut utiliser <code>typeof</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">3</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="dv">3</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fl">3.14</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fl">3.14</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Les fonctions <code>as.numeric</code> et <code>as.integer</code> peuvent √™tre utilis√©es pour convertir d‚Äôun type √† l‚Äôautre:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Conversion en int</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.integer</span>(<span class="fl">3.79</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Attention √† la conversion <em>double</em> <span class="math inline">\(\to\)</span> <em>int</em>, qui tronque la partie d√©cimale.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># double -&gt; int -&gt; double</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>(<span class="fl">3.79</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div>
</div>
<p>Les <em>floats</em> peuvent √©galement √™tre √©crits en notation scientifique :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fl">2e3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fl">2e3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
</section>
<section id="op√©rations-arithm√©tiques-de-base" class="level3" data-number="2.1.2">
<h3 data-number="2.1.2" class="anchored" data-anchor-id="op√©rations-arithm√©tiques-de-base"><span class="header-section-number">2.1.2</span> Op√©rations arithm√©tiques de base</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/verybadtrip.gif" class="img-fluid figure-img"></p>
</figure>
</div>
<p>Comme tout langage informatique, <i class="fa-brands fa-r-project" aria-label="r-project"></i> est avant tout une calculette. On est sauv√©, on peut donc faire des additions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Addition</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span> <span class="sc">+</span> <span class="dv">9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 17</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><i class="fa-brands fa-r-project" aria-label="r-project"></i> est bien fait, il adapte le type des variables pour les mettre en coh√©rence lorsqu‚Äôelles peuvent l‚Äô√™tre:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Addition</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fl">8.1</span> <span class="sc">+</span> <span class="fu">as.integer</span>(<span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 17.1</code></pre>
</div>
</div>
</div>
</div>
<p>On a bien-s√ªr acc√®s √† d‚Äôautres op√©rations standards:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Soustraction</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">-</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiplication</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> <span class="dv">6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Division</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span> <span class="sc">/</span> <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.25</code></pre>
</div>
</div>
<p>Il faut tout de m√™me faire attention √† la division par 0</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Division par 0</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">/</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Inf</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="dv">5</span> <span class="sc">/</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -Inf</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Certains langages, comme <code>Python</code>, ne permettent pas la division par 0, ils renvoient une erreur plut√¥t qu‚Äô<code>Inf</code>. C‚Äôest un peu pi√©geux en <code>R</code> car cela peut arriver d‚Äôavoir des divisions par 0 sans qu‚Äôon s‚Äôen rende compte‚Ä¶</p>
</div>
</div>
<p>Comme toute calculette, on peut appliquer d‚Äôautres types d‚Äôop√©rations</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Division euclidienne : quotient</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span> <span class="sc">%/%</span> <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Division euclidienne : reste</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span> <span class="sc">%%</span> <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Puissance</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">^</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Racine carr√©e</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.236068</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Log</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6931472</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exponentielle</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7.389056</code></pre>
</div>
</div>
<p>L‚Äôordre des op√©rations suit la convention usuelle:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">5</span> <span class="sc">*</span> (<span class="dv">10</span> <span class="sc">-</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32</code></pre>
</div>
</div>
</section>
<section id="vectorisation" class="level3" data-number="2.1.3">
<h3 data-number="2.1.3" class="anchored" data-anchor-id="vectorisation"><span class="header-section-number">2.1.3</span> Vectorisation</h3>
<p>Si on ne pouvait utiliser <i class="fa-brands fa-r-project" aria-label="r-project"></i> qu‚Äôen mode calculette peu raffin√©e, √ßa ne serait pas un langage tr√®s int√©ressant pour l‚Äôanalyse de donn√©es. L‚Äôavantage principal de <i class="fa-brands fa-r-project" aria-label="r-project"></i> est qu‚Äôon va pouvoir manipuler des vecteurs, c‚Äôest √† dire des suites de nombres. On va consid√©rer que les vecteurs sont des suites de nombres ordonn√©s en une seule colonne:</p>
<p><span class="math display">\[
\begin{bmatrix} x_1 \\ x_2 \\ \vdots \\ x_n \end{bmatrix}
\]</span></p>
<p>et on va appliquer des op√©rations sur chaque ligne de ces vecteurs. On parle de <strong>vectorisation</strong> des op√©rations pour d√©signer une op√©ration qui s‚Äôappliquera de mani√®re automatique √† chaque √©l√©ment de notre vecteur.</p>
<p>Par exemple, la multiplication est vectorielle par d√©faut:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">*</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">20</span>,<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]   5 100  10</code></pre>
</div>
</div>
<p>De m√™me l‚Äôaddition, √† condition de mettre des vecteurs de taille coh√©rente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">20</span>,<span class="dv">2</span>) <span class="sc">+</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">2</span>,<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22 22 22</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">20</span>,<span class="dv">2</span>) <span class="sc">-</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -2 17 -1</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si la taille des vecteurs n‚Äôest pas coh√©rente, <i class="fa-brands fa-r-project" aria-label="r-project"></i> recycle le vecteur le plus petit jusqu‚Äô√† atteindre la bonne taille</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">20</span>,<span class="dv">2</span>) <span class="sc">-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in c(1, 20, 2) - c(1, 20): longer object length is not a multiple of
shorter object length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 1</code></pre>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="characters" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="characters"><span class="header-section-number">2.2</span> Les cha√Ænes de caract√®res (<em>characters</em>)</h2>
<p>Les cha√Ænes de caract√®res (ou <em>strings</em>) sont utilis√©es pour stocker de l‚Äôinformation textuelle. Plus pr√©cis√©ment, elles peuvent stocker tout caract√®re de type <a href="https://fr.wikipedia.org/wiki/Unicode">Unicode</a>, ce qui inclut les lettres des diff√©rentes langues, mais √©galement la ponctuation, les chiffres, les smileys, etc.</p>
<section id="cr√©er-un-string" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="cr√©er-un-string"><span class="header-section-number">2.2.1</span> Cr√©er un <em>string</em></h3>
<p>Pour cr√©er une chaine de caract√®res (<em>string</em>), on peut utiliser de mani√®re indiff√©rente les guillemets ou les apostrophes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-22"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="1">1</button><span id="annotated-cell-22-1" class="code-annotation-target"><a href="#annotated-cell-22-1" aria-hidden="true" tabindex="-1"></a><span class="st">'mot'</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="2">2</button><span id="annotated-cell-22-2" class="code-annotation-target"><a href="#annotated-cell-22-2" aria-hidden="true" tabindex="-1"></a><span class="st">"√ßa fonctionne aussi"</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-22" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-annotation="1" data-code-cell="annotated-cell-22">Premi√®re m√©thode: <code>'</code></span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="2" data-code-annotation="2" data-code-cell="annotated-cell-22">Deuxi√®me m√©thode (pr√©f√©rable): <code>"</code></span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "mot"
[1] "√ßa fonctionne aussi"</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Attention au m√©lange des deux !</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">'l'</span>apostrophe, quelle catastrophe<span class="st">')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:1:10: unexpected symbol
1: print('l'apostrophe
             ^</code></pre>
</div>
</div>
<p>La deuxi√®me apostrophe est comprise comme la fin du <em>string</em>, et <i class="fa-brands fa-r-project" aria-label="r-project"></i> ne sait pas interpr√©ter le reste de la s√©quence.</p>
<p>Il faut donc varier en cas de besoin :</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-2"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="1">1</button><span id="annotated-cell-2-1" class="code-annotation-target"><a href="#annotated-cell-2-1" aria-hidden="true" tabindex="-1"></a><span class="st">"l'apostrophe, aucun probl√®me"</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-annotation="1" data-code-cell="annotated-cell-2">Cette fois, l‚Äôapostrophe <code>'</code> est bien enchass√©e au sein des guillemets qui d√©limitent notre <em>string</em>.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "l'apostrophe, aucun probl√®me"</code></pre>
</div>
</div>
<p>Cela fonctionne √©galement en sens inverse: les guillements sont bien interpr√©t√©s lorsqu‚Äôils sont entre apostrophes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="st">'les guillemets, "aucun probl√®me"'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "les guillemets, \"aucun probl√®me\""</code></pre>
</div>
</div>
<p>Comme l‚Äôillustre la sortie ci-dessus, il est possible de bien d√©finir les caract√®res sp√©ciaux de cette sorte en les √©chappant avec des antislashs <code>\</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-4"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="1">1</button><span id="annotated-cell-4-1" class="code-annotation-target"><a href="#annotated-cell-4-1" aria-hidden="true" tabindex="-1"></a><span class="st">"les guillemets, </span><span class="sc">\"</span><span class="st">aucun probl√®me</span><span class="sc">\"</span><span class="st">"</span></span>
<span id="annotated-cell-4-2"><a href="#annotated-cell-4-2" aria-hidden="true" tabindex="-1"></a><span class="st">'l</span><span class="sc">\'</span><span class="st">apostrophe, aucun probl√®me'</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-4" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1,2" data-code-annotation="1" data-code-cell="annotated-cell-4"><code>\</code> permet √† <i class="fa-brands fa-r-project" aria-label="r-project"></i> de comprendre que l‚Äôapostrophe ou le guillemet fait partie de la chaine de caract√®re et non de sa d√©limitation.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "les guillemets, \"aucun probl√®me\""
[1] "l'apostrophe, aucun probl√®me"</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="quelques-fonctions-utiles" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="quelques-fonctions-utiles"><span class="header-section-number">2.2.2</span> Quelques fonctions utiles</h3>
<p><i class="fa-brands fa-r-project" aria-label="r-project"></i> propose par d√©faut un certain nombre de fonctions utiles pour extraire ou transformer des vecteurs textuels. On en d√©couvrira des plus pratiques et plus g√©n√©rales lorsqu‚Äôon se focalisera sur les donn√©es textuelles et le package <a href="https://stringr.tidyverse.org/"><code>stringr</code></a>.</p>
<p>La fonction <code>nchar</code> permet de compter le nombre de caract√®res d‚Äôun <em>string</em>, tous caract√®res inclus (lettres, chiffres, espaces, ponctuation‚Ä¶).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(<span class="st">"J'ai 19 charact√®res"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 19</code></pre>
</div>
</div>
<p>Il ne faut pas la confondre avec la fonction <code>length</code>. Celle-ci nous donne la longueur du vecteur. Par exemple,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="st">"J'ai 19 charact√®res"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>est de taille 1 puisqu‚Äôon a un seul √©l√©ment dans notre vecteur. Si on prend un vecteur de plus grande dimension:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">c</span>(<span class="st">"J'ai 19 charact√®res"</span>, <span class="st">"pas moi"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>On retrouve bien le nombre d‚Äô√©l√©ments de notre vecteur en sortie de <code>length</code>.</p>
<p><code>nchar</code> est une op√©ration vectorielle, on peut donc compter la longueur de chaque ligne de notre jeu de donn√©es:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(<span class="fu">c</span>(<span class="st">"J'ai 19 charact√®res"</span>, <span class="st">"pas moi"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 19  7</code></pre>
</div>
</div>
<p>L‚Äôun des int√©r√™ts des fonctions de base de traitement des donn√©es textuelles est la possibilit√© de remettre en forme nos cha√Ænes de caract√®res de mani√®re automatique. Par exemple, l‚Äôop√©ration la plus simple est de changer la capitalisation de notre texte:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-27"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-27" data-target-annotation="1">1</button><span id="annotated-cell-27-1" class="code-annotation-target"><a href="#annotated-cell-27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toupper</span>(<span class="fu">c</span>(<span class="st">"sequence 850"</span>, <span class="st">"Sequence 850"</span>))</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-27" data-target-annotation="2">2</button><span id="annotated-cell-27-2" class="code-annotation-target"><a href="#annotated-cell-27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tolower</span>(<span class="fu">c</span>(<span class="st">"SEQuEnce 850"</span>, <span class="st">"SEQUENCE 850"</span>))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-27" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-annotation="1" data-code-cell="annotated-cell-27">Mettre en majuscules tout le texte.</span>
</dd>
<dt data-target-cell="annotated-cell-27" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="2" data-code-annotation="2" data-code-cell="annotated-cell-27">Mettre en minuscules.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "SEQUENCE 850" "SEQUENCE 850"
[1] "sequence 850" "sequence 850"</code></pre>
</div>
</div>
<p>Mais on peut aussi nettoyer des chaines textuelles avec quelques fonctions de base :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">strsplit</span>(<span class="fu">c</span>(<span class="st">"une s√©quence    √† s√©parer"</span>, <span class="st">"uneautre√†s√©parer"</span>), <span class="at">split =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "une"      "s√©quence" ""         ""         ""         "√†"        "s√©parer" 

[[2]]
[1] "uneautre√†s√©parer"</code></pre>
</div>
</div>
<p>A ce stade, la sortie obtenue, avec des <code>[[]]</code> peut vous para√Ætre √©trange car nous n‚Äôavons pas encore d√©couvert le type <code>list</code>.</p>
<p>Ce type de donn√©es n‚Äô√©tant pas forc√©ment pratique pour l‚Äôanalyse statistique, pour laquelle on pr√©f√®re des formats comme le vecteur, ce sera beaucoup plus pratique d‚Äôutiliser le <em>package</em> <code>stringr</code> pour faire un <em>split</em>.</p>
<p>On peut tout √† fait d√©couper notre <em>string</em> sur autre chose que les espaces!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">strsplit</span>(<span class="fu">c</span>(<span class="st">"une s√©quence    √† s√©parer"</span>, <span class="st">"uneautre√†s√©parer"</span>), <span class="at">split =</span> <span class="st">"√†"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "une s√©quence    " " s√©parer"        

[[2]]
[1] "uneautre" "s√©parer" </code></pre>
</div>
</div>
<p>On peut concat√©ner des chaines de caract√®re ensemble, c‚Äôest tr√®s pratique. Malheureusement le <code>+</code> ne fonctionne pas en <code>R</code> pour les chaines de caract√®res (contrairement √† <code>Python</code>). Pour effectuer cela on utilise <code>paste</code> ou <code>paste0</code> (une version moins g√©n√©rale mais qui est pens√©e pour les concat√©nations simples):</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-30"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-30-1"><a href="#annotated-cell-30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(</span>
<span id="annotated-cell-30-2"><a href="#annotated-cell-30-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"La premi√®re fois qu'Aur√©lien vit B√©r√©nice,"</span>,</span>
<span id="annotated-cell-30-3"><a href="#annotated-cell-30-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">" "</span>,</span>
<span id="annotated-cell-30-4"><a href="#annotated-cell-30-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"il la trouva franchement laide. Elle lui d√©plut, enfin."</span>,</span>
<span id="annotated-cell-30-5"><a href="#annotated-cell-30-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">" "</span>,</span>
<span id="annotated-cell-30-6"><a href="#annotated-cell-30-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Il n'aima pas comment elle √©tait habill√©e."</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-30" data-target-annotation="1">1</button><span id="annotated-cell-30-7" class="code-annotation-target"><a href="#annotated-cell-30-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="annotated-cell-30-8"><a href="#annotated-cell-30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-30-9"><a href="#annotated-cell-30-9" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(</span>
<span id="annotated-cell-30-10"><a href="#annotated-cell-30-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"La premi√®re fois qu'Aur√©lien vit B√©r√©nice,"</span>,</span>
<span id="annotated-cell-30-11"><a href="#annotated-cell-30-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"il la trouva franchement laide. Elle lui d√©plut, enfin."</span>,</span>
<span id="annotated-cell-30-12"><a href="#annotated-cell-30-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Il n'aima pas comment elle √©tait habill√©e."</span>,</span>
<span id="annotated-cell-30-13"><a href="#annotated-cell-30-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">" "</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-30" data-target-annotation="2">2</button><span id="annotated-cell-30-14" class="code-annotation-target"><a href="#annotated-cell-30-14" aria-hidden="true" tabindex="-1"></a>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-30" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="7" data-code-annotation="1" data-code-cell="annotated-cell-30">Avec <code>paste0</code>, on concat√®ne en accolant les <em>strings</em>, sans espace.</span>
</dd>
<dt data-target-cell="annotated-cell-30" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="14" data-code-annotation="2" data-code-cell="annotated-cell-30">Avec <code>paste</code>, on peut choisir la mani√®re d‚Äôaccoler les <em>strings</em>, ici en mettant des espaces.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "La premi√®re fois qu'Aur√©lien vit B√©r√©nice, il la trouva franchement laide. Elle lui d√©plut, enfin. Il n'aima pas comment elle √©tait habill√©e."
[1] "La premi√®re fois qu'Aur√©lien vit B√©r√©nice, il la trouva franchement laide. Elle lui d√©plut, enfin. Il n'aima pas comment elle √©tait habill√©e."</code></pre>
</div>
</div>
<p>On peut utiliser les strings comme <em>templates</em>. C‚Äôest particuli√®rement pratique pour automatiquement cr√©er du texte √† partir de valeurs issues de nos donn√©es. Pour cela on utilise <code>sprintf</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"La premi√®re fois qu'%s vit %s"</span>, <span class="st">"Aur√©lien"</span>, <span class="st">"B√©r√©nice"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "La premi√®re fois qu'Aur√©lien vit B√©r√©nice"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"%s et %s font %s"</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span><span class="sc">+</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2 et 2 font 4"</code></pre>
</div>
</div>
<p><code>%s</code> sert √† d√©finir l‚Äôendroit o√π sera coll√© le texte voulu.</p>
</section>
</section>
<section id="logicals" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="logicals"><span class="header-section-number">2.3</span> Vecteurs logiques (<em>logicals</em>)</h2>
<p>En <i class="fa-brands fa-r-project" aria-label="r-project"></i>, les vecteurs logiques sont utilis√©s pour stocker des valeurs bool√©ennes, c‚Äôest-√†-dire des valeurs vraies (<code>TRUE</code>) ou fausses (<code>FALSE</code>).</p>
<p>Les vecteurs logiques sont couramment utilis√©s pour effectuer des op√©rations de logique, des filtres de donn√©es et des s√©lections conditionnelles. Nous y reviendrons par la suite, nous les utiliserons fr√©quemment mais de mani√®re indirecte.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-33"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-33" data-target-annotation="1">1</button><span id="annotated-cell-33-1" class="code-annotation-target"><a href="#annotated-cell-33-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">&gt;</span> <span class="dv">3</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-33" data-target-annotation="2">2</button><span id="annotated-cell-33-2" class="code-annotation-target"><a href="#annotated-cell-33-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">==</span> <span class="dv">2</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-33" data-target-annotation="3">3</button><span id="annotated-cell-33-3" class="code-annotation-target"><a href="#annotated-cell-33-3" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span> <span class="sc">==</span> (<span class="dv">2</span> <span class="sc">-</span> <span class="dv">2</span>)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-33" data-target-annotation="4">4</button><span id="annotated-cell-33-4" class="code-annotation-target"><a href="#annotated-cell-33-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">&lt;</span> <span class="dv">0</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-33" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-annotation="1" data-code-cell="annotated-cell-33"><code>TRUE</code>, car 5 est sup√©rieur √† 3.</span>
</dd>
<dt data-target-cell="annotated-cell-33" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="2" data-code-annotation="2" data-code-cell="annotated-cell-33"><code>TRUE</code>, car 2 est √©gal √† 2.</span>
</dd>
<dt data-target-cell="annotated-cell-33" data-target-annotation="3">3</dt>
<dd>
<span data-code-lines="3" data-code-annotation="3" data-code-cell="annotated-cell-33"><code>TRUE</code>, le chainage des op√©rations est respect√©.</span>
</dd>
<dt data-target-cell="annotated-cell-33" data-target-annotation="4">4</dt>
<dd>
<span data-code-lines="4" data-code-annotation="4" data-code-cell="annotated-cell-33"><code>FALSE</code>, car 1 n‚Äôest pas inf√©rieur √† 0.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE
[1] TRUE
[1] TRUE
[1] FALSE</code></pre>
</div>
</div>
<p>On peut g√©n√©raliser les comparaisons pour obtenir des vecteurs:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">1</span>, <span class="dv">3</span>) <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE</code></pre>
</div>
</div>
<p>On obtient <code>TRUE</code> pour les nombres pairs, <code>FALSE</code> pour les impairs.</p>
<p>Utiliser des vecteurs logiques nous permettra, au quotidien, s√©lectionner des donn√©es. Par exemple si on a des donn√©es d‚Äô√¢ge, on peut ne vouloir garder que les pr√©noms des adultes. Cela pourra √™tre fait sur le mod√®le suivant:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">'Pierre'</span>, <span class="st">'Paul'</span>, <span class="st">'Fran√ßois'</span>, <span class="st">'et les autres'</span>)[</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">3</span>, <span class="dv">61</span>, <span class="dv">17</span>) <span class="sc">&gt;=</span> <span class="dv">18</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Pierre"   "Fran√ßois"</code></pre>
</div>
</div>
<p>N√©anmoins nous verrons dans les prochains chapitres comment int√©grer ce principe dans une s√©quence plus g√©n√©rale d‚Äôop√©rations gr√¢ce au package <a href="https://dplyr.tidyverse.org/reference/filter.html"><code>dplyr</code></a>.</p>
</section>
<section id="factors" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="factors"><span class="header-section-number">2.4</span> Les facteurs (<em>factors</em>)</h2>
<p>Les facteurs (<em>factors</em>) sont utilis√©s pour repr√©senter des <strong>variables cat√©gorielles</strong>, c‚Äôest-√†-dire des variables qui prennent un nombre fini et pr√©d√©termin√© de niveaux ou de cat√©gories.</p>
<p>Pour convertir un vecteur num√©rique ou textuel en vecteur, on utilise la fonction <code>factor</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">"capitale"</span>,<span class="st">"pr√©fecture"</span>,<span class="st">"sous-pr√©fecture"</span>,<span class="st">"pr√©fecture"</span>)</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] capitale        pr√©fecture      sous-pr√©fecture pr√©fecture     
Levels: capitale pr√©fecture sous-pr√©fecture</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">10</span>,<span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1  10 3 
Levels: 1 3 10</code></pre>
</div>
</div>
<p>Les niveaux d‚Äôun facteur sont les diff√©rentes cat√©gories ou valeurs possibles que la variable peut prendre. On peut les lister avec la fonction <code>levels</code></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "capitale"        "pr√©fecture"      "sous-pr√©fecture"</code></pre>
</div>
</div>
<p>On peut aussi ordonner ces niveaux si cela a un sens lors de la d√©finition du facteur. Cela implique n√©anmoins de conna√Ætre, <em>a priori</em> nos diff√©rents niveaux et les renseigner √† <i class="fa-brands fa-r-project" aria-label="r-project"></i> dans l‚Äôordre:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] capitale        pr√©fecture      sous-pr√©fecture pr√©fecture     
Levels: capitale &lt; pr√©fecture &lt; sous-pr√©fecture</code></pre>
</div>
</div>
</section>
</section>
<section id="cr√©er-des-variables" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Cr√©er des variables</h1>
<p>Jusqu‚Äôici, nous avons d√ª d√©finir √† chaque fois notre objet avant de pouvoir lui appliquer une transformation. Comment faire si l‚Äôon veut r√©utiliser un objet et lui appliquer plusieurs transformations ? Ou faire des op√©rations √† partir de diff√©rents objets ?</p>
<p>Pour cela, on va <strong>assigner</strong> les objets √† des variables. Cela permet ensuite de r√©aliser des op√©rations √† partir de ces variables.</p>
<p>En <i class="fa-brands fa-r-project" aria-label="r-project"></i>, l‚Äôassignation se fait suivant le format :</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>nom_de_la_variable <span class="ot">&lt;-</span> objet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Le sens de la fl√®che a une importance et il est conventionnel de mettre √† gauche le nom de la variable (et donc d‚Äôutiliser <code>nom_de_la_variable &lt;- objet</code> plut√¥t que <code>objet -&gt; nom_de_la_variable</code>).</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>L‚Äôassignation sous la forme <code>&lt;-</code> est une sp√©cificit√© de <i class="fa-brands fa-r-project" aria-label="r-project"></i> par rapport √† beaucoup de langages. Dans la plupart des langages informatiques, comme en <code>Python</code> par exemple, l‚Äôassignation se fait avec <code>=</code>:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>nom_de_la_variable <span class="ot">=</span> objet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>C‚Äôest √©galement possible en <i class="fa-brands fa-r-project" aria-label="r-project"></i> mais il est plus conventionnel d‚Äôutiliser <code>&lt;-</code>.</p>
</div>
</div>
<p>Voici par exemple comment cr√©er un vecteur <code>x</code> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
<p>Celui-ci peut alors √™tre r√©utilis√© ult√©rieurement dans le code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<p>Les variables peuvent √™tre n‚Äôimporte quel type d‚Äôobjet <i class="fa-brands fa-r-project" aria-label="r-project"></i> et on peut cr√©er une variable √† partir d‚Äôune autre:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>)</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">2</span><span class="sc">*</span>x</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15 30</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Contrairement √† d‚Äôautres langages de programmation, <i class="fa-brands fa-r-project" aria-label="r-project"></i> est dit <em>dynamiquement</em> typ√© : il est possible de r√©assigner une variable √† un objet de type diff√©rent. Cela facilite la lecture et le d√©veloppement, mais peut parfois g√©n√©rer des probl√®mes difficiles √† d√©bugger‚Ä¶</p>
<p>Il faut donc toujours bien faire attention que le type de la variable est bien celui que l‚Äôon s‚Äôimagine manipuler.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-1"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-1-1"><a href="#annotated-cell-1-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="annotated-cell-1-2"><a href="#annotated-cell-1-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"blabla"</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="1">1</button><span id="annotated-cell-1-3" class="code-annotation-target"><a href="#annotated-cell-1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl>
<dt data-target-cell="annotated-cell-1" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="3" data-code-annotation="1" data-code-cell="annotated-cell-1"><code>x</code> n‚Äôest plus un <em>numeric</em> mais un <em>character</em>. Gare aux op√©rations √† venir sur <code>x</code> !</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
</div>
</div>
<p>Il y a naturellement certaines contraintes sur les op√©rations selon les types des objets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-42"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-42-1"><a href="#annotated-cell-42-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"test"</span></span>
<span id="annotated-cell-42-2"><a href="#annotated-cell-42-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-42" data-target-annotation="1">1</button><span id="annotated-cell-42-3" class="code-annotation-target"><a href="#annotated-cell-42-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> y</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-42" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="3" data-code-annotation="1" data-code-cell="annotated-cell-42">L‚Äôaddition <code>+</code> n‚Äôexiste pas pour les <em>strings</em> comme on l‚Äôa vu pr√©c√©demment</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-error">
<pre><code>Error in x + y: non-numeric argument to binary operator</code></pre>
</div>
</div>
<p>Il est par contre possible d‚Äôharmoniser les types en amont :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"5"</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(x)</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>y <span class="sc">+</span> z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
</section>
<section id="indexation" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Indexation</h1>
<p>En <i class="fa-brands fa-r-project" aria-label="r-project"></i>, les indices de position dans les vecteurs permettent d‚Äôacc√©der √† des √©l√©ments sp√©cifiques en utilisant leur position dans le vecteur. Les indices commencent √† <code>1</code>, ce qui signifie que le premier √©l√©ment a un indice de 1, le deuxi√®me a un indice de 2, et ainsi de suite<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">*</span><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pour acc√©der √† un √©l√©ment sp√©cifique du vecteur en utilisant son indice de position, on utilise la notation <code>[ ]</code>. Par exemple, pour obtenir le deuxi√®me √©l√©ment de <code>x</code>, vous pouvez faire ceci :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Acc√©der au deuxi√®me √©l√©ment du vecteur</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>deuxieme_position <span class="ot">&lt;-</span> x[<span class="dv">2</span>]</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>deuxieme_position</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>Maintenant, la variable <code>deuxieme_position</code> contient la valeur 4.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>On peut d‚Äôailleurs mettre √† jour le vecteur <code>x</code>, cela ne changera pas la valeur de la variable <code>deuxieme_position</code> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">5</span>,<span class="dv">9</span>)</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(deuxieme_position)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>deuxieme_position <span class="sc">==</span> x[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>En <i class="fa-brands fa-r-project" aria-label="r-project"></i>, une valeur de variable n‚Äôest chang√©e que s‚Äôil y a, d‚Äôune mani√®re ou d‚Äôune autre, r√©assignation.</p>
</div>
</div>
<p>On peut aussi utiliser une s√©quence de valeurs pour r√©cup√©rer un sous-ensemble de notre vecteur (on appelle cette op√©ration <em>slice</em>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">5</span>,<span class="dv">15</span>)</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 6 7 8 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">8</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  6  7 12</code></pre>
</div>
</div>
<p>Il est √©galement possible de faire des s√©lections n√©gatives, c‚Äôest-√†-dire toutes les valeurs sauf certaines. Pour cela, on utilise les indices n√©gatifs</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-48"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-48" data-target-annotation="1">1</button><span id="annotated-cell-48-1" class="code-annotation-target"><a href="#annotated-cell-48-1" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">-</span><span class="dv">3</span>]</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-48" data-target-annotation="2">2</button><span id="annotated-cell-48-2" class="code-annotation-target"><a href="#annotated-cell-48-2" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="sc">-</span><span class="dv">1</span>)]</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-48" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-annotation="1" data-code-cell="annotated-cell-48">On s√©lectionne toutes les donn√©es sauf le premier √©l√©ment</span>
</dd>
<dt data-target-cell="annotated-cell-48" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="2" data-code-annotation="2" data-code-cell="annotated-cell-48">On s√©lectionne toutes les donn√©es sauf les premier et troisi√®me √©l√©ments (l‚Äôordre n‚Äôimporte pas)</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  5  6  8  9 10 11 12 13 14 15
[1]  6  8  9 10 11 12 13 14 15</code></pre>
</div>
</div>
<p>Cependant, ce n‚Äôest pas une bonne pratique d‚Äôutiliser de mani√®re brute les nombres. En effet, imaginons que vous transformiez dans une longue chaine d‚Äôop√©rations votre vecteur: vous ne savez plus forc√©ment quelles positions stockent quelles valeurs (et sur les vrais jeux de donn√©es vous ne savez m√™me pas exactement quelles lignes de votre jeu de donn√©es stockent quelles valeurs).</p>
<p>C‚Äôest pour cette raison qu‚Äôon privil√©gie les s√©lections √† partir de conditions logiques. On l‚Äôavait vu pr√©c√©demment sous cette forme :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">'Pierre'</span>, <span class="st">'Paul'</span>, <span class="st">'Fran√ßois'</span>, <span class="st">'et les autres'</span>)[</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">3</span>, <span class="dv">61</span>, <span class="dv">17</span>) <span class="sc">&gt;=</span> <span class="dv">18</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Pierre"   "Fran√ßois"</code></pre>
</div>
</div>
<p>Maintenant que nous connaissons l‚Äôassignation de variables interm√©diaires, la syntaxe se simplifie, ce qui rend le code plus lisible.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>prenom <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'Pierre'</span>, <span class="st">'Paul'</span>, <span class="st">'Fran√ßois'</span>, <span class="st">'et les autres'</span>)</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">3</span>, <span class="dv">61</span>, <span class="dv">17</span>)</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>prenom[age <span class="sc">&gt;=</span> <span class="dv">18</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Pierre"   "Fran√ßois"</code></pre>
</div>
</div>
<p>Un autre exemple pour illustrer avec des donn√©es textuelles:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>villes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Paris"</span>, <span class="st">"Toulouse"</span>, <span class="st">"Narbonne"</span>, <span class="st">"Foix"</span>)</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>statut <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"capitale"</span>,<span class="st">"pr√©fecture"</span>,<span class="st">"sous-pr√©fecture"</span>,<span class="st">"pr√©fecture"</span>)</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>villes[statut <span class="sc">==</span> <span class="st">"pr√©fecture"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Toulouse" "Foix"    </code></pre>
</div>
</div>
<p>Nous d√©couvrirons lors du prochain chapitre une g√©n√©ralisation de cette approche avec les <strong>filtres</strong> de donn√©es.</p>
</section>
<section id="les-valeurs-manquantes" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Les valeurs manquantes</h1>
<p>Les vrais jeux de donn√©es ne sont pas toujours complets. Ils le sont m√™me rarement. Par exemple, dans des s√©ries longues de PIB, les valeurs r√©trospectives peuvent manquer pour des pays qui n‚Äôexistaient pas avant une certaine date.</p>
<p>Les valeurs manquantes, souvent repr√©sent√©es par <code>NA</code> (Not Available) en <i class="fa-brands fa-r-project" aria-label="r-project"></i>, sont un aspect essentiel de la gestion des donn√©es et l‚Äôune des forces de <i class="fa-brands fa-r-project" aria-label="r-project"></i> est de proposer une gestion coh√©rente de celles-ci. Par exemple, si on d√©sire faire la moyenne mondiale des PIB sur une ann√©e pass√©e: faut-il exclure ou non les pays pour lesquels on a pas d‚Äôinformation cette ann√©e-l√† ou renvoyer une erreur ? La gestion appropri√©e des valeurs manquantes est donc cruciale lors de l‚Äôanalyse de donn√©es et de la cr√©ation de mod√®les statistiques.</p>
<p>La fonction <code>is.na()</code> permet de v√©rifier si une valeur est manquante dans un vecteur:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-52"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-52" data-target-annotation="1">1</button><span id="annotated-cell-52-1" class="code-annotation-target"><a href="#annotated-cell-52-1" aria-hidden="true" tabindex="-1"></a>donnees <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="cn">NA</span>, <span class="dv">30</span>, <span class="cn">NA</span>, <span class="dv">50</span>)</span>
<span id="annotated-cell-52-2"><a href="#annotated-cell-52-2" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-52" data-target-annotation="2">2</button><span id="annotated-cell-52-3" class="code-annotation-target"><a href="#annotated-cell-52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(donnees)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-52" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-annotation="1" data-code-cell="annotated-cell-52">Cr√©er un vecteur avec des valeurs manquantes.</span>
</dd>
<dt data-target-cell="annotated-cell-52" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="3" data-code-annotation="2" data-code-cell="annotated-cell-52">Renvoie <code>TRUE</code> pour les valeurs manquantes, <code>FALSE</code> sinon.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE  TRUE FALSE</code></pre>
</div>
</div>
<p>La gestion appropri√©e des valeurs manquantes est cruciale pour √©viter des biais dans les analyses statistiques et pour obtenir des r√©sultats fiables car les valeurs manquantes sont rarement un hasard: il existe souvent une raison pour lesquelles une valeur est manquante et l‚Äôhypoth√®se de <a href="https://stefvanbuuren.name/fimd/sec-MCAR.html"><em>missing at random</em></a> est souvent fausse.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note sur la gestion des valeurs manquantes
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Il existe plusieurs approches pour traiter les valeurs manquantes en fonction de l‚Äôobjectif d‚Äôune analyse. Cela d√©passe le cadre de ce cours mais voici, dans les grandes lignes, les trois strat√©gies les plus courantes sont :</p>
<ul>
<li><strong>Suppression des valeurs manquantes</strong> : supprimer les lignes contenant des valeurs manquantes √† l‚Äôaide de la fonction <code>na.omit()</code> ou <code>complete.cases()</code>. C‚Äôest par exemple ce que fait la r√©gression lin√©aire par d√©faut dans <code>R</code>. Cependant, cette approche peut entra√Æner une perte d‚Äôinformations ou l‚Äôintroduction de biais, elle n‚Äôest donc pas √† faire √† la l√©g√®re ;</li>
<li><strong>Imputation des valeurs manquantes</strong> : En faisant des hypoth√®ses sur la distribution sous-jacente des valeurs manquantes, les valeurs de ces derni√®res peuvent √™tre estim√©es. La m√©thode la plus simple est d‚Äôimputer √† la moyenne ou √† la m√©diane mais il existe des m√©thodes moins frustres comme la r√©gression ou les m√©thodes bas√©es sur les voisins les plus proches. N√©anmoins cette imputation n‚Äôest pas √† prendre √† la l√©g√®re car elle change la distribution de la variable observ√©e, ce qui peut avoir un impact sur les analyses ult√©rieures, et elle est tr√®s d√©pendante du choix de mod√©lisation;</li>
<li><strong>Traiter les valeurs manquantes comme un groupe √† part</strong> : Dans les statistiques descriptives, il est possible de r√©aliser des analyses en mettant un groupe o√π les valeurs manquantes sont fr√©quentes √† part.</li>
</ul>
</div>
</div>
</div>
</section>
<section id="exercices-sur-les-objets-uni-dimensionnel" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Exercices sur les objets uni-dimensionnel</h1>
<p>Premi√®re s√©rie d‚Äôexercices sur les objets uni-dimensionnels permettant d‚Äôapprofondir les notions vues pr√©c√©demment.</p>
<details>
<summary>
Votre √©tat apr√®s cette s√©rie d‚Äôexercices ?
</summary>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/exhausted.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
</details>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 2
</div>
</div>
<div class="callout-body-container callout-body">
<p>Afficher le type de <code>x</code> lorsque :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"test"</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fl">3.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 3
</div>
</div>
<div class="callout-body-container callout-body">
<p>Calculer la somme des longueurs de chacune des cha√Ænes de caract√®res suivantes :</p>
<ul>
<li><em>‚Äúune premi√®re cha√Æne‚Äù</em></li>
<li><em>‚Äúet une deuxi√®me‚Äù</em></li>
<li><em>‚Äújamais deux sans trois‚Äù</em></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 4
</div>
</div>
<div class="callout-body-container callout-body">
<p>Quel est le type adapt√© pour d√©finir un <a href="https://www.insee.fr/fr/information/6800675">code commune</a> (ne pas chercher √† importer le jeu de donn√©es<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>) ?</p>
<details>
<summary>
Aide si vous ne voyez pas o√π est le probl√®me
</summary>
Faire un test sur les premiers d√©partements, par exemple <code>02350</code>.
</details>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 5
</div>
</div>
<div class="callout-body-container callout-body">
<p>Voici une liste de codes communes issus du <a href="(https://www.insee.fr/fr/information/6800675)">Code Officiel G√©ographique (COG)</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>liste_communes <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">'01363'</span>, <span class="st">'02644'</span>, <span class="st">'03137'</span>, <span class="st">'11311'</span>, <span class="st">'12269'</span>, <span class="st">'13018'</span>, <span class="st">'14458'</span>, <span class="st">'15008'</span>,</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">'23103'</span>, <span class="st">'2A119'</span>, <span class="st">'2B352'</span>, <span class="st">'34005'</span>, <span class="st">'2B015'</span>, <span class="st">'2A015'</span>,</span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">'38188'</span>, <span class="st">'39574'</span>, <span class="st">'40223'</span>, <span class="st">'41223'</span>, <span class="st">'42064'</span>,</span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">'63117'</span>, <span class="st">'64218'</span>, <span class="st">'65209'</span>, <span class="st">'66036'</span>, <span class="st">'67515'</span>, <span class="st">'68266'</span>, </span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">'77440'</span>, <span class="st">'78372'</span>, <span class="st">'79339'</span>, <span class="st">'80810'</span>, <span class="st">'81295'</span>, <span class="st">'82067'</span>,</span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">'93039'</span>, <span class="st">'94054'</span>, <span class="st">'95061'</span>, <span class="st">'97119'</span>, <span class="st">'97219'</span>, <span class="st">'97356'</span>, <span class="st">'97421'</span>, <span class="st">'97611'</span></span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>Extraire le d√©partement (deux premiers caract√®res) pour chaque commune ;</li>
<li>Compter le nombre de d√©partements uniques dans nos donn√©es ;</li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 6
</div>
</div>
<div class="callout-body-container callout-body">
<p>Supprimer les espaces superflus au d√©but et √† la fin de la cha√Æne suivante :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="st">"    Un string tr√®s mal formatt√©.         "</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Un string tr√®s mal formatt√©."</code></pre>
</div>
</div>
<details>
<summary>
Aide, si vous √™tes bloqu√©s
</summary>
Taper <code>?trimws()</code> dans la console pour afficher l‚Äôaide de la fonction <code>trimws()</code>
</details>
</div>
</div>
<p>Les fonctions de base de manipulation de donn√©es textuelles √©tant parfois un peu difficiles d‚Äôusage avec <i class="fa-brands fa-r-project" aria-label="r-project"></i>, on pourra aller beaucoup plus loin lorsqu‚Äôon d√©couvrira le package <code>stringr</code>.</p>
</section>
<section id="les-structures-plus-complexes" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Les structures plus complexes</h1>
<section id="les-matrices" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="les-matrices"><span class="header-section-number">7.1</span> Les matrices</h2>
<p>Les <strong>matrices</strong> peuvent √™tre vues comme le prolongement en deux dimensions des vecteurs. Au lieu d‚Äôavoir des donn√©es sur une seule dimension, on empile des colonnes c√¥te √† c√¥te.</p>
<p><span class="math display">\[
X = \begin{bmatrix}
x_{11} &amp; x_{12} \\
x_{21} &amp; x_{22} \\
\end{bmatrix}
\]</span></p>
<p>N√©anmoins, les matrices pr√©sentent une limite fondamentale: on ne peut stocker dans une matrice que des √©l√©ments de m√™me type. Autrement dit, on aura exclusivement des matrices num√©riques, des matrices de caract√®res ou des matrices logiques. Il est impossible de construire une matrice dont certaines variables sont de type num√©rique (par exemple l‚Äô√¢ge des personnes enqu√™t√©es) et d‚Äôautres de type caract√®re (par exemple leur secteur d‚Äôactivit√©).</p>
<p>Les matrices ne constituent donc pas un type d‚Äôobjet susceptible de stocker l‚Äôinformation statistique habituellement mobilis√©e dans les enqu√™tes sociales. Le <em>mix</em> des types n‚Äôest pas pratique, c‚Äôest pour cette raison que les praticiens de l‚Äôanalyse de donn√©es les utilisent peu<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</p>
<p>On propose donc un exercice sur les matrices mais on va rapidement passer √† des types plus flexibles, plus utiles pour l‚Äôanalyse de donn√©es o√π les variables sont de type diverses.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 7
</div>
</div>
<div class="callout-body-container callout-body">
<p>Soit une matrice:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">matrix</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>], <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li><p>S√©lectionner l‚Äô√©lement le plus √† gauche de notre matrice (premi√®re ligne, premi√®re colonne)</p></li>
<li><p>S√©lectionner l‚Äôensemble de la premi√®re ligne</p></li>
<li><p>S√©lectionner l‚Äôensemble de la premi√®re colonne</p></li>
<li><p>S√©lectionner les √©l√©ments √† l‚Äôintersection :</p>
<ul>
<li>Des 2e et 3e ligne</li>
<li>Des 1√®res et 3e colonne</li>
</ul></li>
</ol>
<details>
<summary>
Indice si vous √™tes bloqu√©s
</summary>
Avec un vecteur, on acc√©dait aux positions d‚Äôun √©l√©ment avec <code>X[*]</code>. Avec les matrices le principe est le m√™me mais on ajoute une dimension <code>X[*,*]</code>
</details>
</div>
</div>
</section>
<section id="les-listes" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="les-listes"><span class="header-section-number">7.2</span> Les listes</h2>
<p>Les <strong>listes</strong> constituent un type d‚Äôobjet beaucoup plus riche qui permet pr√©cis√©ment de rassembler des types d‚Äôobjets tr√®s diff√©rents : une liste peut contenir tous les types d‚Äôobjet (vecteurs num√©riques, caract√®res, logiques, matrices, etc.), y compris d‚Äôautres listes.</p>
<p>Cette tr√®s grande souplesse fait de la liste l‚Äôobjet de pr√©dilection pour stocker une information complexe et structur√©e, en particulier les r√©sultats de proc√©dures statistiques complexes (r√©gression, classification, etc.). Pour des donn√©es plus structur√©es, comme le sont les jeux de donn√©es, nous allons voir ensuite que nous allons utiliser un type sp√©cial de liste: le <strong><em>dataframe</em></strong>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/boites.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Proposition d‚Äôillustration du principe des listes avec <code>R</code> par <a href="https://openai.com/dall-e-2">Dall-E-2</a></figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 8
</div>
</div>
<div class="callout-body-container callout-body">
<p>Voici une liste illustrant le principe de stockage de donn√©es h√©t√©rog√®nes dans un m√™me objet:</p>
<ol type="1">
<li>Afficher la liste et observer la diff√©rence avec l‚Äôaffichage des objets pr√©c√©dents</li>
<li>Utiliser la notation <code>[[]]</code> pour acc√©der au 2e √©l√©ment de notre liste pour au 2e nombre au sein du dernier √©l√©ment de notre matrice</li>
<li>On peut utiliser des noms pour les √©l√©ments de notre liste (c‚Äôest d‚Äôailleurs une bonne pratique). Cr√©er un √©l√©ment nomm√© <code>communes</code> dans votre liste stockant les donn√©es suivantes <code>c('01363', '02644', '03137', '11311')</code></li>
<li>Cr√©er un √©l√©ment <code>departements</code> en extrayant les deux premiers chiffres de votre √©l√©ment <code>communes</code></li>
</ol>
</div>
</div>
<p>Lorsqu‚Äôon utilise des listes, on peut effectuer des op√©rations sur chaque √©l√©ment de notre liste. On appelle cela boucler sur notre liste.</p>
<!----
Les boucles
sont un √©l√©ment fondamental en informatique et `R`
comme tous les autres langages, permet de faire
ce type d'it√©rations (boucles `for`, `while`...).
Cela va √™tre illustr√© dans le prochain exercice. Il
convient n√©anmoins de garder en t√™te que c'est souvent
une mauvaise pratique d'effectuer une boucle: il existe
g√©n√©ralement des op√©rations vectoris√©es d√©velopp√©es
par
des experts qui permettent
d'√©viter de faire soi-m√™me une boucle inefficiente.
----->
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 9
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dans cet exercice, nous allons d√©couvrir comment appliquer la m√™me fonction aux √©l√©ments de notre liste gr√¢ce √† <code>lapply</code>.</p>
<ol type="1">
<li>Avant cela, combien d‚Äô√©l√©ments comporte le premier niveau de notre liste ?</li>
<li>Combien d‚Äô√©l√©ments comportent chaque niveaux de notre liste ?</li>
<li>Cr√©er un vecteur num√©rique qui est √©gal √† 1 si <code>typeof</code> de l‚Äô√©l√©ment est ‚Äúdouble‚Äù et 0 sinon</li>
</ol>
<details>
<summary>
Si <code>?lapply</code> ne vous aide pas
</summary>
<p>Exemple d‚Äôutilisation de <code>lapply</code> pour faire la somme dans chaque √©l√©ment de notre liste</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>ma_liste_nombres <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>))</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(ma_liste_nombres, sum)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 3

[[2]]
[1] 55</code></pre>
</div>
</div>
</details>
</div>
</div>
</section>
<section id="les-dataframes" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="les-dataframes"><span class="header-section-number">7.3</span> Les <em>dataframes</em></h2>
<p>C‚Äôest l‚Äôobjet central de l‚Äôanalyse de donn√©es avec <i class="fa-brands fa-r-project" aria-label="r-project"></i>. Ces objets permettent en effet de repr√©senter sous la forme d‚Äôune table (i.e.&nbsp;d‚Äôun objet √† deux dimensions) des donn√©es de nature tant quantitatives (variables num√©riques) que qualitatives (variables de type caract√®re ou facteur).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Illustration du principe du <em>dataframe</em> (emprunt√©e √† H. Wickham)</figcaption>
</figure>
</div>
<p>Voici par exemple un <code>dataframe</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cr√©ation du data.frame df</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">var1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">var2 =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>],</span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">var3 =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="at">times =</span> <span class="dv">5</span>)</span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Sa structure interne peut √™tre v√©rifi√©e avec la fonction <code>str</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   10 obs. of  3 variables:
 $ var1: int  1 2 3 4 5 6 7 8 9 10
 $ var2: chr  "a" "b" "c" "d" ...
 $ var3: logi  TRUE FALSE TRUE FALSE TRUE FALSE ...</code></pre>
</div>
</div>
<p>Quand on travaille avec <code>R</code>, l‚Äôune des fonctions qu‚Äôon utilise le plus est <code>head</code>. Elle permet d‚Äôafficher les <span class="math inline">\(n\)</span> premi√®res lignes de notre jeu de donn√©es:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  var1 var2  var3
1    1    a  TRUE
2    2    b FALSE
3    3    c  TRUE
4    4    d FALSE
5    5    e  TRUE
6    6    f FALSE</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Il est √©galement possible d‚Äôutiliser le <em>viewer</em> de <code>RStudio</code> pour afficher des jeux de donn√©es.</p>
<p>Attention cependant, ce <em>viewer</em> peut rencontrer des probl√®mes de performance et faire planter votre session <code>R</code> quand le jeu de donn√©es commence √† √™tre d‚Äôune taille cons√©quente.</p>
<p>Je recommande plut√¥t de toucher utiliser <code>head</code> ou de s√©lectionner des lignes al√©atoirement avec <code>sample</code>:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>   var1 var2  var3
2     2    b FALSE
1     1    a  TRUE
10   10    j FALSE</code></pre>
</div>
</div>
</div>
</div>
<p>Du point de vue de sa structure, un <code>data.frame</code> est en r√©alit√© une liste dont tous les √©l√©ments ont la m√™me longueur : c‚Äôest ce qui permet de le repr√©senter sous la forme d‚Äôun tableau √† deux dimensions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.list</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(df, length)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$var1
[1] 10

$var2
[1] 10

$var3
[1] 10</code></pre>
</div>
</div>
<p>De ce fait, les <code>data.frame</code> empruntent leurs caract√©ristiques tant√¥t aux listes, tant√¥t aux matrices comme le montre l‚Äôexercice suivant:</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 10
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>V√©rifier la dimension du dataframe <code>df</code></li>
<li>Compter le nombre de lignes et de colonnes de <code>df</code></li>
<li>V√©rifier la longueur (<em>length</em>) de <code>df</code>. Est-ce le comportement d‚Äôune matrice ou d‚Äôune liste ?</li>
<li>Extraire l‚Äô√©lement √† la 2e ligne, 3e colonne de <code>df</code>. Est-ce le comportement d‚Äôindexation d‚Äôune matrice ou d‚Äôune liste ?</li>
<li>R√©cup√©rer la 3e ligne des variables <code>var1</code> et <code>var2</code>.</li>
</ul>
</div>
</div>
<p>L‚Äôint√©r√™t d‚Äôutiliser un <code>data.frame</code> est qu‚Äôon peut facilement mettre √† jour nos donn√©es lors d‚Äôune analyse statistique. Les op√©rations les plus classiques, sur lesquelles nous reviendrons lors du prochain chapitre, sont</p>
<ul>
<li>Cr√©er une nouvelle colonne √† partir des colonnes pr√©-existantes ;</li>
<li>S√©lectionner un sous-√©chantillon des donn√©es correspondant √† certaines valeurs observ√©es.</li>
</ul>
<p>Il existe plusieurs mani√®res de faire r√©f√©rence √† une colonne d√©j√† existante d‚Äôun dataframe. La plus simple est d‚Äôutiliser la structure <code>dataframe$colonne</code>. Cela nous donnera un vecteur et on retombe sur ce format qu‚Äôon conna√Æt d√©j√†:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df<span class="sc">$</span>var1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 11
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Cr√©er une colonne <code>var4</code> de notre jeu de donn√©es √©gale au carr√© de <code>var1</code></li>
<li>Cr√©er une colonne <code>var5</code> de notre jeu de donn√©es concat√©nant les deux premi√®res variables en g√©n√©ralisant le sch√©ma <code>1=a</code>.</li>
<li>Cr√©er un dataframe <code>df_small1</code> pour les lignes o√π la condition logique <code>var3</code> est v√©rifi√©e</li>
<li>Cr√©er un dataframe <code>df_small2</code> pour les lignes o√π <code>var1</code> est paire (voir plus haut l‚Äôexemple sur la division euclidienne pour le mod√®le)</li>
</ul>
</div>
</div>
<p>Le prochain chapitre va nous permettre d‚Äôaller beaucoup plus loin gr√¢ce √† l‚Äô√©cosyst√®me du <code>tidyverse</code> et notamment son <em>package</em> phare <code>dplyr</code>. Sans cet ensemble de <em>packages</em> facilitant grandement l‚Äôanalyse statistique, <i class="fa-brands fa-r-project" aria-label="r-project"></i> ne serait pas devenu l‚Äôun des deux langages phares de la statistique.</p>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Pour installer soi-m√™me <code>RStudio</code>, les instructions sont <a href="https://posit.co/download/rstudio-desktop/">ici</a>. N√©anmoins, dans le cadre de ce cours, vous n‚Äôaurez pas besoin de faire l‚Äôinstallation, nous allons utiliser une infrastructure pr√©configur√©e. De cette mani√®re, nous aurons acc√®s au m√™me environnement.<a href="#fnref1" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn2"><p>Cette remarque peut para√Ætre triviale mais, en informatique, elle ne l‚Äôest pas. Beaucoup de langages (<code>Python</code>, <code>C</code>) ont une indexation qui commence √† 0, comme c‚Äôest la convention en alg√®bre. Cela signifie que le premier √©l√©ment a un indice 0, le deuxi√®me indice 1 et le dernier un indice <span class="math inline">\(n-1\)</span>.<a href="#fnref2" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn3"><p>La suite du cours sera l‚Äôoccasion d‚Äôamplement utiliser ce jeu de donn√©es.<a href="#fnref3" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn4"><p>L‚Äôobjet matrice sera surtout utilis√© par les les chercheurs en statistique math√©matique ou les sp√©cialistes d‚Äôalgorithmique qui manipuleront des objets num√©riques bas niveau.<a href="#fnref4" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Handle positioning of the toggle
      window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>